/*
Main
Updated: 2021-09-06
*/
window.main=window.main||{},main.App=function(){"use strict";function e(e){let t="";return e&&(t=e.replace(/\s/g,"")),t}function t(e,t){let n=!1;if(""!==t){for(let a=0;a<t.length;a++)if(e.indexOf(t.charAt(a))>=0){n=!0;break}}else n=!0;return n}function n(e,t){let n="";if(e=Math.abs(parseInt(e)),Number.isInteger(e)&&""!==t)for(let a=0;a<e;a++)n+=t.charAt(Math.floor(Math.random()*t.length));return n}function a(){let e=Object.values(data.templateFields);for(let t of e)main.Data.destroy(data.localDB+"-"+t),document.getElementById(t).value=document.getElementById(t).defaultValue;main.Data.destroy(data.localDB+"-"+data.saveId),document.getElementById(data.saveId).checked=document.getElementById(data.saveId).defaultChecked,document.getElementById(data.outputId).value=document.getElementById(data.outputId).defaultValue,document.getElementById(data.templateButtons.submitId).focus()}function d(){let a="",d="",l=document.getElementById(data.templateFields.lengthId).value,o=document.getElementById(data.templateFields.lettersLowerId).value,c=document.getElementById(data.templateFields.lettersUpperId).value,i=document.getElementById(data.templateFields.numbersId).value,u=document.getElementById(data.templateFields.symbolsId).value,m=document.getElementById(data.templateFields.amountId).value,s=document.getElementById(data.saveId).checked;if(l>=5&&(""!==o||""!==c||""!==i||""!==u)&&m>=1){let r=(o=e(o))+(c=e(c))+(i=e(i))+(u=e(u));for(let e=0;e<m;e++){for(a=n(l,r);!1===t(a,o)||!1===t(a,c)||!1===t(a,i)||!1===t(a,u);)a=n(l,r);0===e?d=a:d+="\r"+a}if(!0===s){let e=Object.values(data.templateFields);for(let t of e)main.Data.store(data.localDB+"-"+t,document.getElementById(t).value);main.Data.store(data.localDB+"-"+data.saveId,s)}}else alert("Error: One or more fields contains an invalid value.");document.getElementById(data.outputId).value=d,document.getElementById(data.outputId).select()}return{init:function(e){if(void 0!==e){if(document.body.innerHTML=document.getElementById(e.templateId).innerHTML,main.Events.click(e.templateButtons.submitId,d),main.Events.click(e.templateButtons.copyId,function(){main.Tasks.copyClip(e.outputId,e.templateButtons.copyId)}),main.Events.click(e.templateButtons.resetId,a),main.Events.click(e.templateButtons.helpId,function(){main.Effects.toggle(e.helpContentId)}),void 0!==main.Data.read(e.localDB+"-"+e.saveId)){let t,n=Object.values(e.templateFields);for(let a of n)void 0!==(t=main.Data.read(e.localDB+"-"+a))&&(document.getElementById(a).value=t);document.getElementById(e.saveId).checked=!0}if(!0===e.autoStart&&d(),!0===e.enableCreds){try{document.getElementById("description").innerHTML=document.getElementsByName("description")[0].getAttribute("content")}catch(e){}try{document.getElementById("author").innerHTML=document.getElementsByName("author")[0].getAttribute("content")}catch(e){}}}}}}(),main.Effects=function(){return{toggle:function(e){const t=document.getElementById(e);"block"===t.style.display?t.style.display="none":t.style.display="block"}}}(),main.Events=function(){return{click:function(e,t){const n=document.getElementById(e);n.addEventListener?n.addEventListener("click",t):n.attachEvent&&n.attachEvent("onclick",t)}}}(),main.Tasks=function(){return{copyClip:function(e,t){const n=document.getElementById(e);if(n.select(),n.setSelectionRange(0,99999),navigator.clipboard.writeText(n.value),void 0!==t){const e=document.getElementById(t),n=e.innerHTML;e.disabled=!0,e.innerHTML="Copied!",e.focus(),setTimeout(function(){e.innerHTML=n,e.disabled=!1},1e3)}}}}(),main.Data=function(){function e(){if("undefined"==typeof Storage)return!1;try{return sessionStorage.setItem("sessionStorage","true"),!0}catch(e){return!1}}return{test:e,store:function(t,n,a){!0===e()&&(a?sessionStorage.setItem(t,n):localStorage.setItem(t,n))},read:function(t){if(!0===e()){if(sessionStorage.getItem(t))return sessionStorage.getItem(t);if(localStorage.getItem(t))return localStorage.getItem(t)}},destroy:function(t){!0===e()&&(t?localStorage.removeItem(t):localStorage.clear())}}}();
