/*
Main
Updated: 2021-09-03
*/
window.main=window.main||{},main.App=function(){"use strict";function e(e){let t="";return e&&(t=e.replace(/\s/g,"")),t}function t(e,t){let a=!1;if(""!==t){for(let n=0;n<t.length;n++)if(e.indexOf(t.charAt(n))>=0){a=!0;break}}else a=!0;return a}function a(e,t){let a="";if(e=Math.abs(parseInt(e)),Number.isInteger(e)&&""!==t)for(let n=0;n<e;n++)a+=t.charAt(Math.floor(Math.random()*t.length));return a}function n(){let e=Object.values(data.templateFields);for(let t of e)main.Data.destroy(data.localDB+"-"+t),document.getElementById(t).value=document.getElementById(t).defaultValue;main.Data.destroy(data.localDB+"-"+data.saveId),document.getElementById(data.saveId).checked=document.getElementById(data.saveId).defaultChecked,document.getElementById(data.outputId).value=document.getElementById(data.outputId).defaultValue,document.getElementById(data.templateButtons.submitId).focus()}function d(){let n="",d="",l=document.getElementById(data.templateFields.lengthId).value,o=document.getElementById(data.templateFields.lettersLowerId).value,m=document.getElementById(data.templateFields.lettersUpperId).value,u=document.getElementById(data.templateFields.numbersId).value,c=document.getElementById(data.templateFields.symbolsId).value,r=document.getElementById(data.templateFields.amountId).value,i=document.getElementById(data.saveId).checked;if(l>=5&&(""!==o||""!==m||""!==u||""!==c)&&r>=1){let s=(o=e(o))+(m=e(m))+(u=e(u))+(c=e(c));for(let e=0;e<r;e++){for(n=a(l,s);!1===t(n,o)||!1===t(n,m)||!1===t(n,u)||!1===t(n,c);)n=a(l,s);0===e?d=n:d+="\r"+n}if(!0===i){let e=Object.values(data.templateFields);for(let t of e)main.Data.store(data.localDB+"-"+t,document.getElementById(t).value);main.Data.store(data.localDB+"-"+data.saveId,i)}}else alert("Error: One or more fields contains an invalid value.");document.getElementById(data.outputId).value=d,document.getElementById(data.outputId).select()}return{init:function(e){if(void 0!==e){if(document.body.innerHTML=document.getElementById(e.templateId).innerHTML,main.Events.click(e.templateButtons.submitId,d),main.Events.click(e.templateButtons.resetId,n),void 0!==main.Data.read(e.localDB+"-"+e.saveId)){let t,a=Object.values(e.templateFields);for(let n of a)void 0!==(t=main.Data.read(e.localDB+"-"+n))&&(document.getElementById(n).value=t);document.getElementById(e.saveId).checked=!0}if(!0===e.autoStart&&d(),!0===e.enableCreds){try{document.getElementById("description").innerHTML=document.getElementsByName("description")[0].getAttribute("content")}catch(e){}try{document.getElementById("author").innerHTML=document.getElementsByName("author")[0].getAttribute("content")}catch(e){}}}}}}(),main.Events=function(){return{click:function(e,t){const a=document.getElementById(e);a.addEventListener?a.addEventListener("click",t):a.attachEvent&&a.attachEvent("onclick",t)}}}(),main.Data=function(){function e(){if("undefined"==typeof Storage)return!1;try{return sessionStorage.setItem("sessionStorage","true"),!0}catch(e){return!1}}return{test:e,store:function(t,a,n){!0===e()&&(n?sessionStorage.setItem(t,a):localStorage.setItem(t,a))},read:function(t){if(!0===e()){if(sessionStorage.getItem(t))return sessionStorage.getItem(t);if(localStorage.getItem(t))return localStorage.getItem(t)}},destroy:function(t){!0===e()&&(t?localStorage.removeItem(t):localStorage.clear())}}}();
